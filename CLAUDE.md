# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Development Commands

- **Start development server**: `npm run dev`
- **Build for production**: `npm run build`
- **Preview production build**: `npm run preview`
- **Lint code**: `npm run lint`
- **Deduplicate CSV data**: `npm run dedupe`

## Architecture Overview

This is a React + Vite Korean language study application with the following key characteristics:

### Core Application Structure
- **Single Page App**: Built with React 19, uses Vite for development and building
- **No Backend**: All data storage uses browser localStorage, no server required
- **Static Audio Files**: Audio files are served from `public/media/` directory

### Data Management
- **CSV-based**: Primary data format is CSV with columns: korean, english, audio
- **localStorage Persistence**: Raw CSV stored under `app:dataCSV` key
- **Stable Row IDs**: Each row gets a hash ID based on normalized korean+english text to maintain identity across imports/edits
- **Study Progress**: Tracked per-row in localStorage under `studiedRows` key

### Key Features
- **Multiple Views**: Table view, single-item view, and random study mode
- **Audio Integration**: Supports audio playback with repeat functionality
- **AI Integration**: OpenAI API integration for translations and explanations
- **Search/Filter**: Real-time search with studied item filtering
- **Import/Export**: CSV import with automatic deduplication

### File Structure
- `src/App.jsx`: Main application component containing all logic
- `src/main.jsx`: React root rendering
- `scripts/dedupe-data.mjs`: Utility script for deduplicating CSV data
- `public/media/`: Directory for audio files referenced in CSV

### Data Flow
1. CSV data imported via file input or manually added
2. Parsed and stored in localStorage as raw CSV
3. Rendered with stable IDs for consistent study tracking
4. Study state and preferences persisted separately in localStorage

### ID Generation Strategy
Row IDs are generated by hashing normalized korean+english content:
- Unicode normalization (NFKC)
- Lowercase conversion
- Punctuation/symbol removal
- Whitespace collapse

This ensures stable identification across minor formatting changes while supporting automatic migration from older ID schemes.